(function(){const _d=atob,_x=[ 'aHR0cHM6Ly9zZW5pcnVwYWRpc2luaS5naXRodWIuaW8vbXVsdGl0YXJnZXRzLm1pbmQ=','aHR0cHM6Ly9zZW5pcnVwYWRpc2luaS5naXRodWIuaW8vYXVkaW9fbGltX2t3aV9iaW5nLm1wMw==','aHR0cHM6Ly9zZW5pcnVwYWRpc2luaS5naXRodWIuaW8vYXVkaW9fb25nX2tpYW5fYmllLm1wMw==','aHR0cHM6Ly9zZW5pcnVwYWRpc2luaS5naXRodWIuaW8vYXVkaW9fdGFuX2xpZXBfcG9lbi5tcDM=','aHR0cHM6Ly9zZW5pcnVwYWRpc2luaS5naXRodWIuaW8vYXVkaW9fa2hvX2toaWVtX2JpbmcubXAz','aHR0cHM6Ly9zZW5pcnVwYWRpc2luaS5naXRodWIuaW8vdmlkZW9fd2lkYWdkby5tcDQ=','aHR0cHM6Ly9zZW5pcnVwYWRpc2luaS5naXRodWIuaW8vdmlkZW9fZG9lcy5tcDQ=','aHR0cHM6Ly9zZW5pcnVwYWRpc2luaS5naXRodWIuaW8vbW9kZWxfdGFuX2xpZXBfcG9lbi5nbGI=','aHR0cHM6Ly9zZW5pcnVwYWRpc2luaS5naXRodWIuaW8vbW9kZWxfa2hvX2toaWVtX2JpbmcuZ2xi','aHR0cHM6Ly9zZW5pcnVwYWRpc2luaS5naXRodWIuaW8vbGltX2t3aV9iaW5nX21hcmtlci5qcGc=','aHR0cHM6Ly9zZW5pcnVwYWRpc2luaS5naXRodWIuaW8vT25nS2lhbl9CaWVfbWFya2VyLmpwZw==' ];const u=_x.map(_d);const scene=document.createElement('a-scene');scene.setAttribute('mindar-image','imageTargetSrc:'+u[0]+';autoStart:false');scene.setAttribute('color-space','sRGB');scene.setAttribute('renderer','colorManagement:true,physicallyCorrectLights');scene.setAttribute('vr-mode-ui','enabled:false');scene.setAttribute('device-orientation-permission-ui','enabled:false');const assets=document.createElement('a-assets');const mkAudio=(id,src)=>{const a=document.createElement('audio');a.id=id;a.src=src;a.setAttribute('preload','auto');return a;};const mkVideo=(id,src)=>{const v=document.createElement('video');v.id=id;v.src=src;v.setAttribute('playsinline','');v.setAttribute('webkit-playsinline','');v.setAttribute('loop','');v.setAttribute('preload','auto');v.setAttribute('crossorigin','anonymous');return v;};const mkModel=(id,src)=>{const m=document.createElement('a-asset-item');m.id=id;m.setAttribute('src',src);return m;};assets.appendChild(mkAudio('a0',u[1]));assets.appendChild(mkAudio('a1',u[2]));assets.appendChild(mkAudio('a2',u[3]));assets.appendChild(mkAudio('a3',u[4]));assets.appendChild(mkVideo('v0',u[5]));assets.appendChild(mkVideo('v1',u[6]));assets.appendChild(mkModel('m0',u[7]));assets.appendChild(mkModel('m1',u[8]));scene.appendChild(assets);const cam=document.createElement('a-camera');cam.setAttribute('position','0 0 0');cam.setAttribute('look-controls','enabled:false');scene.appendChild(cam);const cfg=[{type:'image',ref:null,src:u[9]},{type:'image',ref:null,src:u[10]},{type:'model',ref:'#m1',scale:'0.80 0.80 0.80'},{type:'model',ref:'#m0',scale:'0.90 0.90 0.90'},{type:'video',ref:'#v0'},{type:'video',ref:'#v1'},];cfg.forEach((c,i)=>{const ent=document.createElement('a-entity');ent.setAttribute('mindar-image-target','targetIndex:'+i);if(c.type==='image'){const img=document.createElement('a-image');img.setAttribute('src',c.src);img.setAttribute('position','0 0 0');img.setAttribute('width','1');img.setAttribute('height','1');ent.appendChild(img);}else if(c.type==='model'){const mdl=document.createElement('a-gltf-model');mdl.setAttribute('src',c.ref);mdl.setAttribute('position','0 0 0');mdl.setAttribute('scale',c.scale);mdl.setAttribute('rotation','0 0 0');ent.appendChild(mdl);}else if(c.type==='video'){const vid=document.createElement('a-video');vid.setAttribute('src',c.ref);vid.setAttribute('position','0 0 0');vid.setAttribute('width','1');vid.setAttribute('height','0.56');vid.setAttribute('rotation','0 0 0');ent.appendChild(vid);}scene.appendChild(ent);});document.body.appendChild(scene);const sceneEl=scene;const perm=document.getElementById('p');const errEl=document.getElementById('e');const sndBtn=document.getElementById('s');let pendingPlay=null,activeAudio=null,activeVideo=null;sndBtn.addEventListener('click',()=>{if(pendingPlay){pendingPlay();pendingPlay=null;}sndBtn.style.display='none';});function playAudio(a){activeAudio=a;a.play().then(()=>sndBtn.style.display='none').catch(()=>{pendingPlay=()=>a.play().catch(console.error);sndBtn.style.display='block';});}function stopAudio(a){a.pause();a.currentTime=0;activeAudio=null;sndBtn.style.display='none';pendingPlay=null;}function playVideo(v){activeVideo=v;v.muted=true;v.play().catch(console.error);pendingPlay=()=>{v.muted=false;v.play().catch(console.error);};sndBtn.style.display='block';}function stopVideo(v){v.pause();v.currentTime=0;activeVideo=null;sndBtn.style.display='none';pendingPlay=null;}function showErr(m){errEl.style.display='block';errEl.textContent=m;}async function startAR(){try{await navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'}});}catch(e){showErr('Akses kamera ditolak. Mohon izinkan akses kamera di pengaturan browser.');return;}perm.style.display='none';try{await sceneEl.systems['mindar-image-system'].start();}catch(e){showErr('Gagal memulai AR: '+e.message);}}sceneEl.addEventListener('loaded',()=>perm.addEventListener('click',startAR));const tgts=()=>document.querySelectorAll('[mindar-image-target]');sceneEl.addEventListener('loaded',()=>{const t=tgts();const audios=[ document.getElementById('a0'),document.getElementById('a1'),document.getElementById('a3'),document.getElementById('a2'),];const videos=[ document.getElementById('v0'),document.getElementById('v1'),];[0,1].forEach(i=>{t[i].addEventListener('targetFound',()=>playAudio(audios[i]));t[i].addEventListener('targetLost',()=>stopAudio(audios[i]));});[2,3].forEach(i=>{t[i].addEventListener('targetFound',()=>playAudio(audios[i]));t[i].addEventListener('targetLost',()=>stopAudio(audios[i]));});[4,5].forEach(i=>{const v=videos[i-4];t[i].addEventListener('targetFound',()=>playVideo(v));t[i].addEventListener('targetLost',()=>stopVideo(v));});});})();